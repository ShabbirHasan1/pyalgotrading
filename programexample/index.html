
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Official Python Package for Algorithmic Trading APIs powered by AlgoBulls" name="description"/>
<meta content="Pushpak Dagade (pushpak@algobulls.com)" name="author"/>
<link href="https://algobulls.github.io/pyalgotrading/programexample/" rel="canonical"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-7.0.3" name="generator"/>
<title>Create your Strategy - pyalgotrading</title>
<link href="../assets/stylesheets/main.1655a90d.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.7fa14f5b.min.css" rel="stylesheet"/>
<meta content="#2094f3" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-147658856-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#create-your-strategy">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="pyalgotrading" class="md-header__button md-logo" href="https://algobulls.github.io/pyalgotrading/" title="pyalgotrading">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            pyalgotrading
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Create your Strategy
            
          </span>
</div>
</div>
</div>
<div class="md-header__options">
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/algobulls/pyalgotrading/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="pyalgotrading" class="md-nav__button md-logo" href="https://algobulls.github.io/pyalgotrading/" title="pyalgotrading">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    pyalgotrading
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/algobulls/pyalgotrading/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
        Tutorial
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Tutorial" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../introduction/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../prerequisites/">
        Prerequisites
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../structure/">
        Code Structure of a Strategy
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4">
        Hands On
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Hands On" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          Hands On
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Create your Strategy
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Create your Strategy
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#previously">
    Previously...
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#now">
    Now...
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#before-you-start">
    Before you start...
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lets-start">
    Let's Start...
  </a>
<nav aria-label="Let's Start..." class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#import-statements">
    Import statements
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-the-class-strategysmaregularorder-and-subclass-it-from-strategybase">
    Create the class StrategySMARegularOrder and subclass it from StrategyBase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#constructor-def-__init__">
    Constructor: def __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-initialize">
    def initialize()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-name">
    def name()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-versions_supported">
    def versions_supported()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_select_instruments_for_entry">
    def strategy_select_instruments_for_entry()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_enter_position">
    def strategy_enter_position()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_select_instruments_for_exit">
    def strategy_select_instruments_for_exit()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_exit_position">
    def strategy_exit_position()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-get_crossover_value">
    def get_crossover_value()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#whats-next">
    What's Next...
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../upload/">
        Upload your Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../testing/">
        Test your Strategy
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
        API
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../package_algobulls/">
        algobulls
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_broker/">
        broker
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_instrument/">
        instrument
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_order/">
        order
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_strategy/">
        strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package_utils/">
        utils
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../module_constants/">
        constants
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../codeguide/">
        Strategy Coding Guidelines
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#previously">
    Previously...
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#now">
    Now...
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#before-you-start">
    Before you start...
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lets-start">
    Let's Start...
  </a>
<nav aria-label="Let's Start..." class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#import-statements">
    Import statements
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-the-class-strategysmaregularorder-and-subclass-it-from-strategybase">
    Create the class StrategySMARegularOrder and subclass it from StrategyBase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#constructor-def-__init__">
    Constructor: def __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-initialize">
    def initialize()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-name">
    def name()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-versions_supported">
    def versions_supported()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_select_instruments_for_entry">
    def strategy_select_instruments_for_entry()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_enter_position">
    def strategy_enter_position()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_select_instruments_for_exit">
    def strategy_select_instruments_for_exit()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-strategy_exit_position">
    def strategy_exit_position()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#def-get_crossover_value">
    def get_crossover_value()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#whats-next">
    What's Next...
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/algobulls/pyalgotrading/edit/master/docs/programexample.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="create-your-strategy">Create your Strategy<a class="headerlink" href="#create-your-strategy" title="Permanent link">¶</a></h1>
<h2 id="previously">Previously...<a class="headerlink" href="#previously" title="Permanent link">¶</a></h2>
<hr/>
<p>You have covered the basic code structure of a strategy.</p>
<h2 id="now">Now...<a class="headerlink" href="#now" title="Permanent link">¶</a></h2>
<hr/>
<p>You can either follow this page to create a strategy, or you can pickup a ready strategy (shown below) and move to the next page. </p>
<h2 id="before-you-start">Before you start...<a class="headerlink" href="#before-you-start" title="Permanent link">¶</a></h2>
<hr/>
<p>If you want to use a ready strategy from the <a href="https://github.com/algobulls/pyalgostrategypool">pyalgostrategypool</a> package, then you can directly jump to the <a href="../upload/">Upload</a> section. </p>
<h2 id="lets-start">Let's Start...<a class="headerlink" href="#lets-start" title="Permanent link">¶</a></h2>
<hr/>
<p>Follow the steps given below to create a new strategy of your own.</p>
<p>Create a python file called <code>strategy_sma_regular_order.py</code>.</p>
<p>You will add the following code snippets into the file and then save it.</p>
<h3 id="import-statements">Import statements<a class="headerlink" href="#import-statements" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pyalgotrading.strategy.strategy_base</span> <span class="kn">import</span> <span class="n">StrategyBase</span>
<span class="kn">from</span> <span class="nn">pyalgotrading.constants</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></div>
<h3 id="create-the-class-strategysmaregularorder-and-subclass-it-from-strategybase">Create the class <code>StrategySMARegularOrder</code> and subclass it from <code>StrategyBase</code><a class="headerlink" href="#create-the-class-strategysmaregularorder-and-subclass-it-from-strategybase" title="Permanent link">¶</a></h3>
<hr/>
<p><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StrategySMARegularOrder</span><span class="p">(</span><span class="n">StrategyBase</span><span class="p">):</span>
</code></pre></div>
Now you can add the methods mentioned in the <a href="../structure/">structure</a> inside the class. First you can add the <code>__init__</code> and the <code>initialize</code> methods.</p>
<h3 id="constructor-def-__init__">Constructor: <code>def __init__()</code><a class="headerlink" href="#constructor-def-__init__" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">timeperiod_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy_parameters</span><span class="p">[</span><span class="s1">'timeperiod1'</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timeperiod_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy_parameters</span><span class="p">[</span><span class="s1">'timeperiod2'</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
<p>The <code>init</code> method does the following:</p>
<ol>
<li><code>super()</code> - Calls the constructor of the superclass.</li>
<li><code>self.strategy_parameters</code> - Catches the parameters and saves them for local use - When you will submit a testing job for your SMA strategy, 
you will pass parameters that will be used inside the strategy. 
For SMA, we are calculating crossover for 2 SMA timeperiod values, example 5 and 12.  These 2 parameters will be caught by <code>self.strategy_parameters</code> and stored for local use in <code>self.timeperiod1</code> and <code>self.timeperiod2</code>.</li>
<li><code>self.main_order</code> - Create an object that manages orders for you throughout the strategy.</li>
</ol>
<p>The <code>init</code> method is specific to Python's internal workings and it is preceded and succeeded by double underscores ( _ _ ) joined together.</p>
<h3 id="def-initialize"><code>def initialize()</code><a class="headerlink" href="#def-initialize" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>
<p>The <code>initialize</code> method sets the <code>self.main_order</code> as an empty dictionary. This method is called at the start of every trading day.</p>
<p>For instance, say you are submitting a backtesting job for 5 previous days starting at 10:30 every day, then the <code>initialize</code> method will be called every day for 5 days at 10:30.</p>
<p>Now add the two static methods, <code>name</code> and <code>versions_supprted</code>.</p>
<h3 id="def-name"><code>def name()</code><a class="headerlink" href="#def-name" title="Permanent link">¶</a></h3>
<hr/>
<p><div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">name</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">'SMA Regular Order Strategy'</span>
</code></pre></div>
The name should be unique in your collection of strategies.</p>
<h3 id="def-versions_supported"><code>def versions_supported()</code><a class="headerlink" href="#def-versions_supported" title="Permanent link">¶</a></h3>
<hr/>
<p><div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">versions_supported</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">AlgoBullsEngineVersion</span><span class="o">.</span><span class="n">VERSION_3_2_0</span>
</code></pre></div>
Mark both the above methods as <code>@staticmethod</code>.</p>
<p>The <code>versions_supported</code> method does the following:</p>
<ol>
<li>It notifies the AlgoBulls platform that the strategy is working correctly for the platform version 3.2.0</li>
<li>Since the platform will be constantly upgraded to incorporate new features and improve efficiency, the verion may change.</li>
<li>If the version changes, and if you submit a job for this strategy, then the AlgoBulls platform will spawn a server having version 3.2.0 for your strategy.</li>
<li>Having this method ensures that the AlgoBulls platform always provides the correct environment for your strategy.</li>
</ol>
<h3 id="def-strategy_select_instruments_for_entry"><code>def strategy_select_instruments_for_entry()</code><a class="headerlink" href="#def-strategy_select_instruments_for_entry" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">strategy_select_instruments_for_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candle</span><span class="p">,</span> <span class="n">instruments_bucket</span><span class="p">):</span>

    <span class="n">selected_instruments_bucket</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sideband_info_bucket</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">instrument</span> <span class="ow">in</span> <span class="n">instruments_bucket</span><span class="p">:</span>
        <span class="n">crossover_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_crossover_value</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">crossover_value</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">selected_instruments_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
            <span class="n">sideband_info_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'action'</span><span class="p">:</span> <span class="s1">'BUY'</span><span class="p">})</span>
        <span class="k">elif</span> <span class="n">crossover_value</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy_mode</span> <span class="ow">is</span> <span class="n">StrategyMode</span><span class="o">.</span><span class="n">INTRADAY</span><span class="p">:</span>
                <span class="n">selected_instruments_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
                <span class="n">sideband_info_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'action'</span><span class="p">:</span> <span class="s1">'SELL'</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">selected_instruments_bucket</span><span class="p">,</span> <span class="n">sideband_info_bucket</span>
</code></pre></div>
<p>The <code>strategy_select_instruments_for_entry</code> method does the following:</p>
<ol>
<li><code>selected_instruments_bucket</code> and <code>sideband_info_bucket</code> - Creates 2 empty lists that will be used to pass the selected instruments and additional information about them respectively.</li>
<li>The Loop - The loop will iterate over each instrument name passed (while submitting the job) and will decide whether to set an entry position or not for it.</li>
<li><code>crossover_value</code> - The crossover value is calculated and stored here. Crossover values are interpreted as:<ol>
<li>Value 1 - Cut upwards</li>
<li>Value -1 - Cut downwards</li>
<li>Value 0 - No crossover</li>
</ol>
</li>
<li>If conditions - If the crossover value is 1, then the instrument is selected for entry position, with the position as 'BUY'. If the crossover value is -1, then the instrument is selected for entry position, with the position as 'SELL'. The selected instrument is appended to the <code>selected_instruments_bucket</code>, and the associated action (BUY/SELL) is appended to the <code>sideband_info_bucket</code>.</li>
<li><code>selected_instruments_bucket</code> and <code>sideband_info_bucket</code> - Both the lists (whether populated or empty) are returned to the platform for further actions.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>SELL Entry positions are allowed only if the strategy is running for INTRADAY. DELIVERY strategies do not allow SELL as entry positions. This is taken care of in the <code>elif</code> part.</li>
<li>The <code>strategy_select_instruments_for_entry</code> method is called once for every candle time. For Instance, if you submit a job with the candle time as 15 minutes, then this method will be called once for every 15 minute candle.</li>
<li>The actual Entry position (BUY/SELL) is not entered here. Here, only the instrument is selected based on the crossover value with the proper action mentioned in the <code>sideband_info_bucket</code>. The Entry position will be taken in the next method below.</li>
<li>The <code>sideband_info_bucket</code> contains a very versatile dictionary object. You may use it to pass any other additional information that you wish. </li>
</ul>
</div>
<h3 id="def-strategy_enter_position"><code>def strategy_enter_position()</code><a class="headerlink" href="#def-strategy_enter_position" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">strategy_enter_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candle</span><span class="p">,</span> <span class="n">instrument</span><span class="p">,</span> <span class="n">sideband_info</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sideband_info</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'BUY'</span><span class="p">:</span>
        <span class="n">qty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_lots</span> <span class="o">*</span> <span class="n">instrument</span><span class="o">.</span><span class="n">lot_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="o">.</span><span class="n">BuyOrderRegular</span><span class="p">(</span><span class="n">instrument</span><span class="o">=</span><span class="n">instrument</span><span class="p">,</span>
                <span class="n">order_code</span><span class="o">=</span><span class="n">BrokerOrderCodeConstants</span><span class="o">.</span><span class="n">INTRADAY</span><span class="p">,</span>
                <span class="n">order_variety</span><span class="o">=</span><span class="n">BrokerOrderVarietyConstants</span><span class="o">.</span><span class="n">MARKET</span><span class="p">,</span>
                <span class="n">quantity</span><span class="o">=</span><span class="n">qty</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">sideband_info</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'SELL'</span><span class="p">:</span>
        <span class="n">qty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_lots</span> <span class="o">*</span> <span class="n">instrument</span><span class="o">.</span><span class="n">lot_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="o">.</span><span class="n">SellOrderRegular</span><span class="p">(</span><span class="n">instrument</span><span class="o">=</span><span class="n">instrument</span><span class="p">,</span>
                 <span class="n">order_code</span><span class="o">=</span><span class="n">BrokerOrderCodeConstants</span><span class="o">.</span><span class="n">INTRADAY</span><span class="p">,</span>
                 <span class="n">order_variety</span><span class="o">=</span><span class="n">BrokerOrderVarietyConstants</span><span class="o">.</span><span class="n">MARKET</span><span class="p">,</span>
                 <span class="n">quantity</span><span class="o">=</span><span class="n">qty</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Got invalid sideband_info value: </span><span class="si">{</span><span class="n">sideband_info</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span>
</code></pre></div>
<p>The <code>strategy_enter_position</code> method does the following:</p>
<ol>
<li>If conditions - The conditions read the action from the <code>sideband_info</code> and perform the required action (BUY/SELL).</li>
<li><code>qty</code> - The quantity is calculated and stored here. The number of lots will be passed by you as a parameter while submitting a job. The parameter will be caught in <code>self.number_of_lots</code>. The instrument object has the 'lot size', which you can retrieve using <code>instrument.lot_size</code>. You can then use the formula as shown in the code to calculate the quantity.</li>
<li><code>BuyOrderRegular</code> and <code>SellOrderRegular</code> - These execute the required action. You need to pass the instrument, order code, order variety and the quantity values.<ul>
<li><code>instrument</code> - the instrument on which the BUY/SELL action will be performed.</li>
<li><code>order_code</code> - whether the order is for INTRADAY or DELIVERY. Possible values are:<ul>
<li><code>BrokerOrderCodeConstants.INTRADAY</code></li>
<li><code>BrokerOrderCodeConstants.DELIVERY</code></li>
<li><code>BrokerOrderCodeConstants.DELIVERY_T1</code></li>
<li><code>BrokerOrderCodeConstants.DELIVERY_T2</code></li>
</ul>
</li>
<li><code>order_variety</code> - the type of order variety. Possible values are:<ul>
<li><code>BrokerOrderVarietyConstants.MARKET</code></li>
<li><code>BrokerOrderVarietyConstants.LIMIT</code></li>
<li><code>BrokerOrderVarietyConstants.STOPLOSS_MARKET</code></li>
<li><code>BrokerOrderVarietyConstants.STOPLOSS_LIMIT</code></li>
</ul>
</li>
<li><code>qty</code> - the quantity to BUY/SELL.</li>
</ul>
</li>
<li><code>self.main_order</code> - The main order (for that particular instrument) is now populated (BUY OR SELL) and is returned to the platform for further actions.</li>
</ol>
<p>You can also punch Bracket Orders instead of Regular Orders. A typical BUY Bracket Order will look like this:
<div class="highlight"><pre><span></span><code><span class="n">qty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_lots</span> <span class="o">*</span> <span class="n">instrument</span><span class="o">.</span><span class="n">lot_size</span>
<span class="n">ltp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="o">.</span><span class="n">get_ltp</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="o">.</span><span class="n">BuyOrderBracket</span><span class="p">(</span><span class="n">instrument</span><span class="o">=</span><span class="n">instrument</span><span class="p">,</span>
                <span class="n">order_code</span><span class="o">=</span><span class="n">BrokerOrderCodeConstants</span><span class="o">.</span><span class="n">INTRADAY</span><span class="p">,</span>
                <span class="n">order_variety</span><span class="o">=</span><span class="n">BrokerOrderVarietyConstants</span><span class="o">.</span><span class="n">LIMIT</span><span class="p">,</span>
                <span class="n">quantity</span><span class="o">=</span><span class="n">qty</span><span class="p">,</span>
                <span class="n">price</span><span class="o">=</span><span class="n">ltp</span><span class="p">,</span>
                <span class="n">stoploss_trigger</span><span class="o">=</span><span class="n">ltp</span> <span class="o">-</span> <span class="p">(</span><span class="n">ltp</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">stoploss</span><span class="p">),</span>
                <span class="n">target_trigger</span><span class="o">=</span><span class="n">ltp</span> <span class="o">+</span> <span class="p">(</span><span class="n">ltp</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">),</span>
                <span class="n">trailing_stoploss_trigger</span><span class="o">=</span><span class="n">ltp</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">trailing_stoploss</span><span class="p">)</span>
</code></pre></div></p>
<p>The additional parameters are:</p>
<ul>
<li><code>price</code> - If you want to BUY at the market price (Last Traded Price) or LTP, then just fetch the LTP using <code>get_ltp</code> as shown in the code above. Store the value in <code>ltp</code> and pass it to <code>price</code>.</li>
<li><code>stoploss_trigger</code>, <code>target_trigger</code> and <code>trailing_stoploss_trigger</code> - You can calculate these using the <code>ltp</code> and the values you will pass through 
the job that you will submit. The parameters will be caught as <code>self.stoploss</code>, <code>self.target</code> and <code>self.trailing_stoploss</code>.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>If you plan to use Bracket Order instead of Regular Orders, then create a separate Python file for it, say <code>strategy_sma_bracket_order.py</code>.
 You can also change the class name as <code>StrategySMABracketOrder</code>. There will be changes in the entry and exit methods also.</li>
<li>The <code>strategy_enter_position</code> method is called once for every instrument. For instance, you want to run this strategy for 5 instruments. Say that the <code>strategy_select_instruments_for_entry</code> method selects 3 instruments for ENTRY positions (BUY/SELL). Then, the <code>strategy_enter_position</code> method will be called thrice, once for each instrument respectively within the candle time frame (say, 15 minutes). </li>
</ul>
</div>
<h3 id="def-strategy_select_instruments_for_exit"><code>def strategy_select_instruments_for_exit()</code><a class="headerlink" href="#def-strategy_select_instruments_for_exit" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">strategy_select_instruments_for_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candle</span><span class="p">,</span> <span class="n">instruments_bucket</span><span class="p">):</span>
    <span class="n">selected_instruments_bucket</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sideband_info_bucket</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">instrument</span> <span class="ow">in</span> <span class="n">instruments_bucket</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">crossover_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_crossover_value</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">crossover_value</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">selected_instruments_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
                <span class="n">sideband_info_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'action'</span><span class="p">:</span> <span class="s1">'EXIT'</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">selected_instruments_bucket</span><span class="p">,</span> <span class="n">sideband_info_bucket</span>
</code></pre></div>
<p>The <code>strategy_select_instruments_for_exit</code> method does the following:</p>
<ol>
<li><code>selected_instruments_bucket</code> and <code>sideband_info_bucket</code> - Creates 2 empty lists that will be used to pass the selected instruments and additional information about them respectively.</li>
<li>The Loop - The loop will iterate over each instrument name passed (which are in Entry position (BUY/SELL)) and will decide whether to set an exit position or not for it.</li>
<li>If condition - The exit steps are executed only if the instrument is holding at an ENTRY position (BUY/SELL). You can do this by checking if the <code>self.main_order</code> object is <code>None</code> or not, and proceed only if it is not <code>None</code>. </li>
<li><code>crossover_value</code> - The crossover value is calculated and stored here. Crossover values are interpreted as:<ol>
<li>Value 1 - Cut upwards</li>
<li>Value -1 - Cut downwards</li>
<li>Value 0 - No crossover</li>
</ol>
</li>
<li>If condition - If the crossover value is 1 or -1, then the instrument is selected for exit position. The selected instrument is appended to the <code>selected_instruments_bucket</code>, and the associated action (EXIT) is appended to the <code>sideband_info_bucket</code>.</li>
<li><code>selected_instruments_bucket</code> and <code>sideband_info_bucket</code> - Both the lists (whether populated or empty) are returned to the platform for further actions.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>The actual Exit position (BUY/SELL) is not entered here. Here, only the instrument is selected based on the crossover value with the proper action mentioned in the <code>sideband_info_bucket</code>. The Exit position will be taken in the next method below.</li>
<li>The <code>sideband_info_bucket</code> contains a very versatile dictionary object. You may use it to pass any other additional information that you wish.</li>
<li>Whenever a new trading day starts, the <code>strategy_select_instruments_for_exit</code> is called first. This is very important for DELIVERY strategies. Many instruments might be holding in an Entry Position at the end of the previous trading day, and they might be eligible for exit at the start of the new trading day.  </li>
</ul>
</div>
<h3 id="def-strategy_exit_position"><code>def strategy_exit_position()</code><a class="headerlink" href="#def-strategy_exit_position" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">strategy_exit_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candle</span><span class="p">,</span> <span class="n">instrument</span><span class="p">,</span> <span class="n">sideband_info</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sideband_info</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'EXIT'</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span><span class="o">.</span><span class="n">exit_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_order</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
<p>The <code>strategy_exit_position</code> method does the following:</p>
<ol>
<li>If condition - checks whether the appropriate action is set in the <code>sideband_info</code>.</li>
<li><code>self.main_order</code> - calls <code>exit_position</code> method for the particular main order of the instrument. If the Entry Position was BUY, then the exit position is automatically taken as SELL and vice versa. The platform takes care of this automatically.</li>
<li><code>self.main_order</code> - set it to <code>None</code>, as the order has been exited and no longer holds anything.</li>
<li>Return values - returns <code>True</code> to the platform if the exit steps were performed, else return <code>False</code>.</li>
</ol>
<h3 id="def-get_crossover_value"><code>def get_crossover_value()</code><a class="headerlink" href="#def-get_crossover_value" title="Permanent link">¶</a></h3>
<hr/>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_crossover_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument</span><span class="p">):</span>
    <span class="n">hist_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_historical_data</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
    <span class="n">sma_x</span> <span class="o">=</span> <span class="n">talib</span><span class="o">.</span><span class="n">SMA</span><span class="p">(</span><span class="n">hist_data</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span> <span class="n">timeperiod</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeperiod_x</span><span class="p">)</span>
    <span class="n">sma_y</span> <span class="o">=</span> <span class="n">talib</span><span class="o">.</span><span class="n">SMA</span><span class="p">(</span><span class="n">hist_data</span><span class="p">[</span><span class="s1">'close'</span><span class="p">],</span> <span class="n">timeperiod</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeperiod_y</span><span class="p">)</span>
    <span class="n">crossover_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="n">sma_x</span><span class="p">,</span> <span class="n">sma_y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">crossover_value</span>
</code></pre></div>
<p>The <code>get_crossover_value</code> method does the following:</p>
<ol>
<li><code>hist_data</code> - The historical data for the instrument is fetched using the <code>get_historical_data</code> method and stored here. The data is in the form of a table (Pandas DataFrame) having the following columns:<ul>
<li><code>timestamp</code> - the data and time when the data was measured</li>
<li><code>volume</code> - the volume of that instrument</li>
<li><code>open</code>, <code>high</code>, <code>low</code> and <code>close</code> - the OHLC values of the instrument</li>
<li><code>oi</code> - the Open Interest of that instrument</li>
</ul>
</li>
<li><code>sma_x</code> and <code>sma_y</code> - the SMA function from the <code>talib</code> package is used to calculate the Moving Average for both SMA timeperiods. The candle close value is used for calculations, i.e. <code>hist_data['close']</code>.</li>
<li><code>crossover_value</code> - calculates the crossover value using the <code>crossover</code> method from the <code>utils</code> package.</li>
<li>Return value - return the crossover value to the caller method.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>The order of values passed to the <code>crossover</code> method of the <code>utils</code> package is very important.</li>
<li>Example: you have 2 SMA values, 5 and 12. The strategy describes that there should be an BUY Entry Position when SMA(5) cuts SMA(12) upwards (crossover value should be 1).</li>
<li>In this case, if you mistakenly pass SMA(12) value first and SMA(5) value next to the <code>crossover</code> function, the answer you will get is -1 (Cut downwards).</li>
<li>Though, the crossover value is correct, the strategy is expecting to BUY at crossover 1 as per the code, which will not work now.</li>
<li>Therefore, the strategy will work correctly only if you pass SMA(5) first and then SMA(12) to the <code>crossover</code> function, thus making the order of parameters passed an important point to be aware of, while coding the strategy.</li>
</ul>
</div>
<h2 id="whats-next">What's Next...<a class="headerlink" href="#whats-next" title="Permanent link">¶</a></h2>
<hr/>
<p>Next, you upload the strategy into your AlgoBulls account.</p>
<hr/>
<div class="md-source-date">
<small>
    
      Last update: <span class="timeago" datetime="1610550404000" locale="en"></span>
</small>
</div>
<h2 id="__comments">Comments</h2>
<div id="disqus_thread"></div>
<script>var disqus_config=function(){this.page.url="https://algobulls.github.io/pyalgotrading/programexample/",this.page.identifier="programexample/"};window.addEventListener("load",function(){var e=document,i=e.createElement("script");i.src="//algobulls.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)})</script>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a class="md-footer__link md-footer__link--prev" href="../structure/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Code Structure of a Strategy
            </div>
</div>
</a>
<a class="md-footer__link md-footer__link--next" href="../upload/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Upload your Strategy
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 | All Rights Reserved | AlgoBulls Technologies Private Limited
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://linkedin.com/company/algobulls" rel="noopener" target="_blank" title="linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://facebook.com/algobullsalgotrading" rel="noopener" target="_blank" title="facebook.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://github.com/algobulls/" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
<script src="../assets/javascripts/bundle.ca5457b8.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.locales.min.js"></script>
<script>
            var nodes = document.querySelectorAll('.timeago');
            var locale = nodes[0].getAttribute('locale');
            timeago.render(nodes, locale);
          </script>
</body>
</html>